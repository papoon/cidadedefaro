<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="pages.favorites_title">Favoritos - Faro Formoso</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Seus locais e p√°ginas favoritos salvos no Faro Formoso. Acesso r√°pido aos seus conte√∫dos preferidos.">
    <meta name="keywords" content="favoritos Faro, locais salvos, marcadores">
    <meta name="author" content="Faro Formoso">
    <meta name="robots" content="noindex, follow">
    <link rel="canonical" href="https://papoon.github.io/cidadedefaro/favoritos.html">
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https:; object-src 'none'; base-uri 'self';">
    
    <%- metaCommon %>
</head>
<body>
    <%- header %>
    

    <main id="main-content" role="main">
        <section class="hero">
            <h2 data-i18n="favorites.page_title">‚≠ê Os Meus Favoritos</h2>
            <p data-i18n="favorites.page_description">Aqui encontra todos os locais, servi√ßos e p√°ginas que guardou como favoritos para acesso r√°pido.</p>
        </section>

        <section class="favorites-section">
            <div class="favorites-actions" style="text-align: center; margin-bottom: 2rem;">
                <button id="clear-all-favorites" class="btn btn-secondary" style="margin-right: 1rem;" data-i18n="favorites.clear_all">
                    üóëÔ∏è Limpar Todos
                </button>
                <button id="export-favorites" class="btn btn-outline" data-i18n="favorites.export">
                    üíæ Exportar
                </button>
            </div>

            <div id="favorites-container"></div>
        </section>
    </main>

    <%- footer %>

    <%- scriptsCommon %>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('favorites-container');
            renderFavoritesList(container);

            // Event listener para limpar todos
            document.getElementById('clear-all-favorites').addEventListener('click', function() {
                if (favoritesManager.clearAllFavorites()) {
                    renderFavoritesList(container);
                }
            });

            // Event listener para exportar
            document.getElementById('export-favorites').addEventListener('click', function() {
                const json = favoritesManager.exportFavorites();
                const blob = new Blob([json], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'favoritos-faro-' + new Date().toISOString().split('T')[0] + '.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                showNotification('Favoritos exportados com sucesso!', 'success');
            });

            // Atualizar quando favoritos mudarem
            window.addEventListener('favoritesUpdated', function() {
                renderFavoritesList(container);
            });
        });
    </script>
</body>
</html>
