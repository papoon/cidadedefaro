<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Favoritos - Guia de Faro</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/accessibility.css">
</head>
<body>
    <header role="banner">
        <h1>Guia de Faro</h1>
        <nav role="navigation" aria-label="Menu principal">
            <ul role="menubar">
                <li role="none"><a href="index.html" role="menuitem">In√≠cio</a></li>
                <li role="none"><a href="transportes.html" role="menuitem">Transportes</a></li>
                <li role="none"><a href="saude.html" role="menuitem">Sa√∫de</a></li>
                <li role="none"><a href="ambiente.html" role="menuitem">Ambiente</a></li>
                <li role="none"><a href="lazer.html" role="menuitem">Lazer</a></li>
                <li role="none"><a href="oque-fazer-hoje.html" role="menuitem">O que fazer hoje</a></li>
                <li role="none"><a href="mapa.html" role="menuitem">Mapa</a></li>
                <li role="none"><a href="problemas-frequentes.html" role="menuitem">Problemas Frequentes</a></li>
                <li role="none"><a href="viver-em-faro.html" role="menuitem">Viver em Faro</a></li>
                <li role="none"><a href="mobilidade.html" role="menuitem">Mobilidade</a></li>
                <li role="none"><a href="historia-faro.html" role="menuitem">Hist√≥ria</a></li>
                <li role="none"><a href="favoritos.html" role="menuitem">‚≠ê Favoritos</a></li>
            </ul>
        </nav>
    </header>

    <main id="main-content" role="main">
        <section class="hero">
            <h2>‚≠ê Os Meus Favoritos</h2>
            <p>Aqui encontra todos os locais, servi√ßos e p√°ginas que guardou como favoritos para acesso r√°pido.</p>
        </section>

        <section class="favorites-section">
            <div class="favorites-actions" style="text-align: center; margin-bottom: 2rem;">
                <button id="clear-all-favorites" class="btn btn-secondary" style="margin-right: 1rem;">
                    üóëÔ∏è Limpar Todos
                </button>
                <button id="export-favorites" class="btn btn-outline">
                    üíæ Exportar
                </button>
            </div>

            <div id="favorites-container"></div>
        </section>
    </main>

    <footer role="contentinfo">
        <p>&copy; 2024 Guia de Faro</p>
        <p class="data-sources">Fontes de dados: C√¢mara Municipal de Faro, Portal do Cidad√£o, Turismo de Portugal, GEO API PT</p>
    </footer>

    <script src="js/accessibility.js"></script>
    <script src="js/favorites.js"></script>
    <script src="js/search.js"></script>
    <script src="js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('favorites-container');
            renderFavoritesList(container);

            // Event listener para limpar todos
            document.getElementById('clear-all-favorites').addEventListener('click', function() {
                if (favoritesManager.clearAllFavorites()) {
                    renderFavoritesList(container);
                }
            });

            // Event listener para exportar
            document.getElementById('export-favorites').addEventListener('click', function() {
                const json = favoritesManager.exportFavorites();
                const blob = new Blob([json], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'favoritos-faro-' + new Date().toISOString().split('T')[0] + '.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                showNotification('Favoritos exportados com sucesso!', 'success');
            });

            // Atualizar quando favoritos mudarem
            window.addEventListener('favoritesUpdated', function() {
                renderFavoritesList(container);
            });
        });
    </script>
</body>
</html>
