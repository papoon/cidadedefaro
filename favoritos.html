<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Guia Faro">
    <title>Favoritos - Guia de Faro</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/accessibility.css">
    <link rel="stylesheet" href="css/ux.css">
</head>
<body>
    <!-- Dark Mode Toggle -->
    <button id="dark-mode-toggle" aria-label="Alternar modo escuro" aria-pressed="false">
        <span class="dark-mode-icon">üåô</span>
    </button>

    <header role="banner">
        <h1><span data-i18n="site.title">Guia de Faro</span></h1>
        <div id="lang-switcher">
            <button data-lang="pt" onclick="window.i18n.switchLanguage('pt')" aria-label="Mudar para Portugu√™s">
                üáµüáπ PT
            </button>
            <button data-lang="en" onclick="window.i18n.switchLanguage('en')" aria-label="Switch to English">
                üá¨üáß EN
            </button>
        </div>
        <nav role="navigation" aria-label="Menu principal">
            <ul role="menubar">
                <li role="none"><a href="index.html" role="menuitem"><span data-i18n="nav.home">In√≠cio</span></a></li>
                <li role="none"><a href="transportes.html" role="menuitem"><span data-i18n="nav.transport">Transportes</span></a></li>
                <li role="none"><a href="saude.html" role="menuitem"><span data-i18n="nav.health">Sa√∫de</span></a></li>
                <li role="none"><a href="ambiente.html" role="menuitem"><span data-i18n="nav.environment">Ambiente</span></a></li>
                <li role="none"><a href="lazer.html" role="menuitem"><span data-i18n="nav.leisure">Lazer</span></a></li>
                <li role="none"><a href="restaurantes.html" role="menuitem"><span data-i18n="nav.restaurants">Onde Comer</span></a></li>
                <li role="none"><a href="hoteis.html" role="menuitem"><span data-i18n="nav.hotels">Onde Ficar</span></a></li>
                <li role="none"><a href="oque-fazer-hoje.html" role="menuitem"><span data-i18n="nav.what_to_do">O que fazer hoje</span></a></li>
                <li role="none"><a href="mapa.html" role="menuitem"><span data-i18n="nav.map">Mapa</span></a></li>
                <li role="none"><a href="problemas-frequentes.html" role="menuitem"><span data-i18n="nav.faq">Problemas Frequentes</span></a></li>
                <li role="none"><a href="viver-em-faro.html" role="menuitem"><span data-i18n="nav.living">Viver em Faro</span></a></li>
                <li role="none"><a href="mobilidade.html" role="menuitem"><span data-i18n="nav.mobility">Mobilidade</span></a></li>
                <li role="none"><a href="historia-faro.html" role="menuitem"><span data-i18n="nav.history">Hist√≥ria</span></a></li>
                <li role="none"><a href="guia-premium.html" role="menuitem"><span data-i18n="nav.premium">üìò Guia Premium</span></a></li>
                <li role="none"><a href="favoritos.html" role="menuitem"><span data-i18n="nav.favorites">‚≠ê Favoritos</span> <span id="favorites-count" class="favorites-count" style="display:none;">0</span></a></li>
            </ul>
        </nav>
    </header>

    <main id="main-content" role="main">
        <section class="hero">
            <h2>‚≠ê Os Meus Favoritos</h2>
            <p>Aqui encontra todos os locais, servi√ßos e p√°ginas que guardou como favoritos para acesso r√°pido.</p>
        </section>

        <section class="favorites-section">
            <div class="favorites-actions" style="text-align: center; margin-bottom: 2rem;">
                <button id="clear-all-favorites" class="btn btn-secondary" style="margin-right: 1rem;">
                    üóëÔ∏è Limpar Todos
                </button>
                <button id="export-favorites" class="btn btn-outline">
                    üíæ Exportar
                </button>
            </div>

            <div id="favorites-container"></div>
        </section>
    </main>

    <footer role="contentinfo">
        <p>&copy; 2024 Guia de Faro</p>
        <p class="data-sources">Fontes de dados: C√¢mara Municipal de Faro, Portal do Cidad√£o, Turismo de Portugal, GEO API PT</p>
        <div class="donation-container">
            <p class="donation-message">Apoie este projeto de forma volunt√°ria</p>
            <a href="https://www.buymeacoffee.com/guiadefaro" target="_blank" rel="noopener noreferrer" class="donation-button" aria-label="Apoiar o projeto com uma doa√ß√£o volunt√°ria">
                <span class="donation-icon" role="img" aria-label="√çcone de caf√©">‚òï</span>
                <span>Apoiar o Projeto</span>
            </a>
        </div>
    </footer>

    <script src="js/i18n.js"></script>


    <script src="js/pwa.js"></script>
    <script src="js/accessibility.js"></script>
    <script src="js/favorites.js"></script>
    <script src="js/search.js"></script>
    <script src="js/ux.js"></script>
    <script src="js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('favorites-container');
            renderFavoritesList(container);

            // Event listener para limpar todos
            document.getElementById('clear-all-favorites').addEventListener('click', function() {
                if (favoritesManager.clearAllFavorites()) {
                    renderFavoritesList(container);
                }
            });

            // Event listener para exportar
            document.getElementById('export-favorites').addEventListener('click', function() {
                const json = favoritesManager.exportFavorites();
                const blob = new Blob([json], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'favoritos-faro-' + new Date().toISOString().split('T')[0] + '.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                showNotification('Favoritos exportados com sucesso!', 'success');
            });

            // Atualizar quando favoritos mudarem
            window.addEventListener('favoritesUpdated', function() {
                renderFavoritesList(container);
            });
        });
    </script>
</body>
</html>
